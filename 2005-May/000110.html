<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
 <HEAD>
   <TITLE> [netboard-cvs] netboard DrawingPanel.form,1.1.1.1,1.2 DrawingPanel.java,1.8,1.9 GUI.form,1.11,1.12 GUI.java,1.14,1.15
   </TITLE>
   <LINK REL="Index" HREF="http://lists.berlios.de/pipermail/netboard-cvs/2005-May/index.html" >
   <LINK REL="made" HREF="mailto:netboard-cvs%40lists.berlios.de?Subject=Re%3A%20%5Bnetboard-cvs%5D%20netboard%20DrawingPanel.form%2C1.1.1.1%2C1.2%20DrawingPanel.java%2C1.8%2C1.9%20GUI.form%2C1.11%2C1.12%20GUI.java%2C1.14%2C1.15&In-Reply-To=%3C200505211441.j4LEfxm21164%40bat.berlios.de%3E">
   <META NAME="robots" CONTENT="index,nofollow">
   <style type="text/css">
       pre {
           white-space: pre-wrap;       /* css-2.1, curent FF, Opera, Safari */
           }
   </style>
   <META http-equiv="Content-Type" content="text/html; charset=us-ascii">
   <LINK REL="Previous"  HREF="000109.html">
   <LINK REL="Next"  HREF="000111.html">
 </HEAD>
 <BODY BGCOLOR="#ffffff">
   <H1>[netboard-cvs] netboard DrawingPanel.form,1.1.1.1,1.2 DrawingPanel.java,1.8,1.9 GUI.form,1.11,1.12 GUI.java,1.14,1.15</H1>
    <B>golish</B> 
    <A HREF="mailto:netboard-cvs%40lists.berlios.de?Subject=Re%3A%20%5Bnetboard-cvs%5D%20netboard%20DrawingPanel.form%2C1.1.1.1%2C1.2%20DrawingPanel.java%2C1.8%2C1.9%20GUI.form%2C1.11%2C1.12%20GUI.java%2C1.14%2C1.15&In-Reply-To=%3C200505211441.j4LEfxm21164%40bat.berlios.de%3E"
       TITLE="[netboard-cvs] netboard DrawingPanel.form,1.1.1.1,1.2 DrawingPanel.java,1.8,1.9 GUI.form,1.11,1.12 GUI.java,1.14,1.15">nobody at sheep.berlios.de
       </A><BR>
    <I>Sat May 21 16:41:59 CEST 2005</I>
    <P><UL>
        <LI>Previous message: <A HREF="000109.html">[netboard-cvs] netboard/dist/javadoc/netboard/class-use DrawingPanel.html,1.13,1.14 GUI.PNGFilter.html,1.6,1.7 GUI.html,1.13,1.14 Main.html,1.13,1.14 SerializableImage.html,1.13,1.14 SocketConnection.Exception.html,1.6,1.7 SocketConnection.ReadingTask.html,1.3,1.4 SocketConnection.WritingTask.html,1.3,1.4 SocketConnection.html,1.9,1.10
</A></li>
        <LI>Next message: <A HREF="000111.html">[netboard-cvs] netboard GUI.java,1.15,1.16
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#110">[ date ]</a>
              <a href="thread.html#110">[ thread ]</a>
              <a href="subject.html#110">[ subject ]</a>
              <a href="author.html#110">[ author ]</a>
         </LI>
       </UL>
    <HR>  
<!--beginarticle-->
<PRE>Update of /cvsroot/netboard/netboard
In directory sheep:/tmp/cvs-serv14640

Modified Files:
	DrawingPanel.form DrawingPanel.java GUI.form GUI.java 
Log Message:
some improvements of the GUI + jar + javadoc.


Index: DrawingPanel.form
===================================================================
RCS file: /cvsroot/netboard/netboard/DrawingPanel.form,v
retrieving revision 1.1.1.1
retrieving revision 1.2
diff -C2 -d -r1.1.1.1 -r1.2
*** DrawingPanel.form	4 Apr 2005 10:04:29 -0000	1.1.1.1
--- DrawingPanel.form	21 May 2005 14:41:27 -0000	1.2
***************
*** 9,13 ****
--- 9,15 ----
    &lt;Events&gt;
      &lt;EventHandler event=&quot;mouseDragged&quot; listener=&quot;java.awt.event.MouseMotionListener&quot; parameters=&quot;java.awt.event.MouseEvent&quot; handler=&quot;formMouseDragged&quot;/&gt;
+     &lt;EventHandler event=&quot;mouseMoved&quot; listener=&quot;java.awt.event.MouseMotionListener&quot; parameters=&quot;java.awt.event.MouseEvent&quot; handler=&quot;formMouseMoved&quot;/&gt;
      &lt;EventHandler event=&quot;mouseClicked&quot; listener=&quot;java.awt.event.MouseListener&quot; parameters=&quot;java.awt.event.MouseEvent&quot; handler=&quot;formMouseClicked&quot;/&gt;
+     &lt;EventHandler event=&quot;mousePressed&quot; listener=&quot;java.awt.event.MouseListener&quot; parameters=&quot;java.awt.event.MouseEvent&quot; handler=&quot;formMousePressed&quot;/&gt;
    &lt;/Events&gt;
    &lt;AuxValues&gt;

Index: DrawingPanel.java
===================================================================
RCS file: /cvsroot/netboard/netboard/DrawingPanel.java,v
retrieving revision 1.8
retrieving revision 1.9
diff -C2 -d -r1.8 -r1.9
*** DrawingPanel.java	19 May 2005 17:13:34 -0000	1.8
--- DrawingPanel.java	21 May 2005 14:41:27 -0000	1.9
***************
*** 47,50 ****
--- 47,53 ----
                  formMouseDragged(evt);
              }
+             public void mouseMoved(java.awt.event.MouseEvent evt) {
+                 formMouseMoved(evt);
+             }
          });
          addMouseListener(new java.awt.event.MouseAdapter() {
***************
*** 52,59 ****
--- 55,77 ----
                  formMouseClicked(evt);
              }
+             public void mousePressed(java.awt.event.MouseEvent evt) {
+                 formMousePressed(evt);
+             }
          });
  
      }
      // &lt;/editor-fold&gt;//GEN-END:initComponents
+ 
+     private void formMousePressed(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_formMousePressed
+         if (evt.getButton() == java.awt.event.MouseEvent.BUTTON1) {
+             lastButton = 1;
+         } else if (evt.getButton() == java.awt.event.MouseEvent.BUTTON3) {
+             lastButton = 3;
+         }
+     }//GEN-LAST:event_formMousePressed
+ 
+     private void formMouseMoved(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_formMouseMoved
+         Main.getGUI().setCoords(evt.getX(), evt.getY());
+     }//GEN-LAST:event_formMouseMoved
      
      protected void paintComponent(java.awt.Graphics g) {
***************
*** 78,84 ****
      private void formMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_formMouseClicked
          java.awt.Graphics2D graphics = drawing.createGraphics();
! 
          if (currentTool.equals(&quot;Pen&quot;)) {
!             graphics.setColor(currentOutlineColor);
              graphics.drawLine(evt.getX(), evt.getY(), evt.getX(), evt.getY());
              resetCoords();
--- 96,107 ----
      private void formMouseClicked(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_formMouseClicked
          java.awt.Graphics2D graphics = drawing.createGraphics();
!         
          if (currentTool.equals(&quot;Pen&quot;)) {
!             if (lastButton == 1) {
!                 graphics.setColor(currentOutlineColor);
!             } else if (lastButton == 3) {
!                 graphics.setColor(currentFillColor);
!             }
!             
              graphics.drawLine(evt.getX(), evt.getY(), evt.getX(), evt.getY());
              resetCoords();
***************
*** 137,141 ****
              }
          } else if (currentTool.equals(&quot;Ereaser&quot;)) {
!             graphics.setColor(java.awt.Color.white);
              graphics.fillRect(evt.getX(), evt.getY(), 25, 25);
          }
--- 160,169 ----
              }
          } else if (currentTool.equals(&quot;Ereaser&quot;)) {
!             if (lastButton == 1) {
!                 graphics.setColor(java.awt.Color.white);
!             } else if (lastButton == 3) {
!                 graphics.setColor(currentFillColor);
!             }
!             
              graphics.fillRect(evt.getX(), evt.getY(), 25, 25);
          }
***************
*** 146,149 ****
--- 174,179 ----
      
      private void formMouseDragged(java.awt.event.MouseEvent evt) {//GEN-FIRST:event_formMouseDragged
+         Main.getGUI().setCoords(evt.getX(), evt.getY());
+         
          java.awt.Graphics2D graphics = drawing.createGraphics();
          
***************
*** 155,159 ****
              }
  
!             graphics.setColor(currentOutlineColor);
              graphics.drawLine(lastX, lastY, evt.getX(), evt.getY());
              lastX = evt.getX();
--- 185,194 ----
              }
  
!             if (lastButton == 1) {
!                 graphics.setColor(currentOutlineColor);
!             } else if (lastButton == 3) {
!                 graphics.setColor(currentFillColor);
!             }            
! 
              graphics.drawLine(lastX, lastY, evt.getX(), evt.getY());
              lastX = evt.getX();
***************
*** 166,170 ****
              }
              
!             graphics.setColor(java.awt.Color.white);
              graphics.fillRect(evt.getX(), evt.getY(), 25, 25);
              lastX = evt.getX();
--- 201,210 ----
              }
              
!             if (lastButton == 1) {
!                 graphics.setColor(java.awt.Color.white);
!             } else if (lastButton == 3) {
!                 graphics.setColor(currentFillColor);
!             }            
! 
              graphics.fillRect(evt.getX(), evt.getY(), 25, 25);
              lastX = evt.getX();
***************
*** 333,336 ****
--- 373,380 ----
       */
      private int lastY = -1;
+     /**
+      * Last pressed button number. Used to determine the color of drawn lines, ereaser filling etc.
+      */
+     private int lastButton = 1;
      /**
       * Tells if the shapes should be filled or not

Index: GUI.form
===================================================================
RCS file: /cvsroot/netboard/netboard/GUI.form,v
retrieving revision 1.11
retrieving revision 1.12
diff -C2 -d -r1.11 -r1.12
*** GUI.form	19 May 2005 17:13:35 -0000	1.11
--- GUI.form	21 May 2005 14:41:27 -0000	1.12
***************
*** 373,383 ****
            &lt;Properties&gt;
              &lt;Property name=&quot;focusable&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
!             &lt;Property name=&quot;minimumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
                &lt;Dimension value=&quot;[400, 400]&quot;/&gt;
              &lt;/Property&gt;
!             &lt;Property name=&quot;opaque&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
!             &lt;Property name=&quot;preferredSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
                &lt;Dimension value=&quot;[400, 400]&quot;/&gt;
              &lt;/Property&gt;
            &lt;/Properties&gt;
  
--- 373,383 ----
            &lt;Properties&gt;
              &lt;Property name=&quot;focusable&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
!             &lt;Property name=&quot;maximumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
                &lt;Dimension value=&quot;[400, 400]&quot;/&gt;
              &lt;/Property&gt;
!             &lt;Property name=&quot;minimumSize&quot; type=&quot;java.awt.Dimension&quot; editor=&quot;org.netbeans.beaninfo.editors.DimensionEditor&quot;&gt;
                &lt;Dimension value=&quot;[400, 400]&quot;/&gt;
              &lt;/Property&gt;
+             &lt;Property name=&quot;opaque&quot; type=&quot;boolean&quot; value=&quot;false&quot;/&gt;
            &lt;/Properties&gt;
  
***************
*** 388,391 ****
--- 388,401 ----
        &lt;/SubComponents&gt;
      &lt;/Container&gt;
+     &lt;Component class=&quot;javax.swing.JLabel&quot; name=&quot;coordsLabel&quot;&gt;
+       &lt;Properties&gt;
+         &lt;Property name=&quot;text&quot; type=&quot;java.lang.String&quot; value=&quot;0,0&quot;/&gt;
+       &lt;/Properties&gt;
+       &lt;Constraints&gt;
+         &lt;Constraint layoutClass=&quot;org.netbeans.modules.form.compat2.layouts.DesignGridBagLayout&quot; value=&quot;org.netbeans.modules.form.compat2.layouts.DesignGridBagLayout$GridBagConstraintsDescription&quot;&gt;
+           &lt;GridBagConstraints gridX=&quot;0&quot; gridY=&quot;1&quot; gridWidth=&quot;1&quot; gridHeight=&quot;1&quot; fill=&quot;2&quot; ipadX=&quot;0&quot; ipadY=&quot;0&quot; insetsTop=&quot;0&quot; insetsLeft=&quot;0&quot; insetsBottom=&quot;0&quot; insetsRight=&quot;0&quot; anchor=&quot;16&quot; weightX=&quot;0.0&quot; weightY=&quot;0.0&quot;/&gt;
+         &lt;/Constraint&gt;
+       &lt;/Constraints&gt;
+     &lt;/Component&gt;
    &lt;/SubComponents&gt;
  &lt;/Form&gt;

Index: GUI.java
===================================================================
RCS file: /cvsroot/netboard/netboard/GUI.java,v
retrieving revision 1.14
retrieving revision 1.15
diff -C2 -d -r1.14 -r1.15
*** GUI.java	19 May 2005 17:13:35 -0000	1.14
--- GUI.java	21 May 2005 14:41:27 -0000	1.15
***************
*** 68,71 ****
--- 68,72 ----
          backgroundPanel = new javax.swing.JPanel();
          drawingPanel = new netboard.DrawingPanel();
+         coordsLabel = new javax.swing.JLabel();
          mainMenu = new javax.swing.JMenuBar();
          applicationMenu = new javax.swing.JMenu();
***************
*** 234,240 ****
          backgroundPanel.setPreferredSize(new java.awt.Dimension(400, 400));
          drawingPanel.setFocusable(false);
          drawingPanel.setMinimumSize(new java.awt.Dimension(400, 400));
          drawingPanel.setOpaque(false);
-         drawingPanel.setPreferredSize(new java.awt.Dimension(400, 400));
          backgroundPanel.add(drawingPanel);
  
--- 235,241 ----
          backgroundPanel.setPreferredSize(new java.awt.Dimension(400, 400));
          drawingPanel.setFocusable(false);
+         drawingPanel.setMaximumSize(new java.awt.Dimension(400, 400));
          drawingPanel.setMinimumSize(new java.awt.Dimension(400, 400));
          drawingPanel.setOpaque(false);
          backgroundPanel.add(drawingPanel);
  
***************
*** 248,251 ****
--- 249,260 ----
          getContentPane().add(backgroundPanel, gridBagConstraints);
  
+         coordsLabel.setText(&quot;0,0&quot;);
+         gridBagConstraints = new java.awt.GridBagConstraints();
+         gridBagConstraints.gridx = 0;
+         gridBagConstraints.gridy = 1;
+         gridBagConstraints.fill = java.awt.GridBagConstraints.HORIZONTAL;
+         gridBagConstraints.anchor = java.awt.GridBagConstraints.SOUTHWEST;
+         getContentPane().add(coordsLabel, gridBagConstraints);
+ 
          applicationMenu.setMnemonic('A');
          applicationMenu.setText(&quot;Application&quot;);
***************
*** 708,711 ****
--- 717,727 ----
      
      /**
+      * Sets the coordinates displayed on the coodinates label.
+      */
+     public void setCoords(int x, int y) {
+         coordsLabel.setText(x + &quot;,&quot; + y);
+     }
+     
+     /**
       * Shows an error message
       * @param message The error message
***************
*** 733,736 ****
--- 749,753 ----
      private javax.swing.JPanel colorChooserPanel;
      private javax.swing.JMenuItem connectMenuItem;
+     private javax.swing.JLabel coordsLabel;
      private javax.swing.JMenuItem disconnectMenuItem;
      private netboard.DrawingPanel drawingPanel;


</PRE>

<!--endarticle-->
    <HR>
    <P><UL>
        <!--threads-->
	<LI>Previous message: <A HREF="000109.html">[netboard-cvs] netboard/dist/javadoc/netboard/class-use DrawingPanel.html,1.13,1.14 GUI.PNGFilter.html,1.6,1.7 GUI.html,1.13,1.14 Main.html,1.13,1.14 SerializableImage.html,1.13,1.14 SocketConnection.Exception.html,1.6,1.7 SocketConnection.ReadingTask.html,1.3,1.4 SocketConnection.WritingTask.html,1.3,1.4 SocketConnection.html,1.9,1.10
</A></li>
	<LI>Next message: <A HREF="000111.html">[netboard-cvs] netboard GUI.java,1.15,1.16
</A></li>
         <LI> <B>Messages sorted by:</B> 
              <a href="date.html#110">[ date ]</a>
              <a href="thread.html#110">[ thread ]</a>
              <a href="subject.html#110">[ subject ]</a>
              <a href="author.html#110">[ author ]</a>
         </LI>
       </UL>

<hr>
<a href="https://lists.berlios.de/mailman/listinfo/netboard-cvs">More information about the netboard-cvs
mailing list</a><br>
</body></html>
